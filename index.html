<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Responsive Animated Meet UI</title>
<script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>
<style>
:root{
  --bg:#0f1116;
  --dock:#1a1f28;
  --text:#e8eaed;
  --accent-green:#1aa260;
  --accent-red:#e53935;
  --accent-blue:#1a73e8;
  --shadow:0 20px 50px rgba(0,0,0,.55);
  --radius:16px;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{background:radial-gradient(circle at top,#151922,var(--bg));font-family:system-ui,sans-serif;color:var(--text);height:100vh;overflow:hidden;}
#stage{position:absolute;inset:0;display:flex;flex-wrap:wrap;gap:12px;padding:12px;justify-content:center;align-content:center;}
.video-box{position:absolute;width:280px;height:160px;background:black;border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);border:2px solid transparent;transition:all .35s ease;resize:both;cursor:grab;}
.video-box.speaking{border-color:var(--accent-green);box-shadow:0 0 15px 5px rgba(26,162,96,.4);}
video{width:100%;height:100%;object-fit:cover;}
.name-tag{position:absolute;bottom:6px;left:8px;background:rgba(0,0,0,.55);padding:4px 8px;border-radius:8px;font-size:12px;animation:fadeInTag .5s;}
@keyframes fadeInTag{0%{opacity:0;transform:translateY(10px);}100%{opacity:1;transform:translateY(0);}}

#dock{position:fixed;display:flex;gap:14px;background:var(--dock);padding:14px;border-radius:28px;box-shadow:var(--shadow);transition:transform .3s;}
.ctrl-btn{width:52px;height:52px;border-radius:50%;border:none;background:#2a3038;color:white;cursor:pointer;display:grid;place-items:center;font-size:20px;position:relative;transition:all .25s;}
.ctrl-btn:hover{transform:scale(1.12);background:#353c45;}
.ctrl-btn.off{background:var(--accent-red);}
.arrow{position:absolute;right:-18px;top:50%;transform:translateY(-50%);font-size:14px;cursor:pointer;user-select:none;}

.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.5);z-index:100;visibility:hidden;opacity:0;transition:opacity .35s ease;}
.modal.show{visibility:visible;opacity:1;}
.modal-content{background:var(--dock);padding:24px;border-radius:20px;min-width:240px;display:flex;flex-direction:column;gap:12px;position:relative;animation:scaleIn .35s;}
@keyframes scaleIn{0%{opacity:0;transform:scale(.85);}100%{opacity:1;transform:scale(1);}}
.modal-content button{padding:12px;border:none;border-radius:14px;background:#2a3038;color:white;cursor:pointer;transition:all .25s;}
.modal-content button:hover{background:#353c45;}
.modal-close{position:absolute;top:8px;right:8px;cursor:pointer;font-weight:bold;font-size:18px;}

/* ================= RESPONSIVE DOCK ================= */
@media (min-width: 768px){
  #dock{flex-direction:column;top:50%;left:20px;transform:translateY(-50%);}
}
@media (max-width: 767px){
  #dock{flex-direction:row;bottom:16px;left:50%;transform:translateX(-50%);}
  .arrow{display:none;} /* arrows hidden on small screens */
}
</style>
</head>
<body>

<div id="stage"></div>

<div id="dock">
  <div style="position:relative;">
    <button class="ctrl-btn" id="micBtn">ðŸŽ¤</button>
    <span class="arrow" id="micArrow">â–¼</span>
  </div>
  <div style="position:relative;">
    <button class="ctrl-btn" id="camBtn">ðŸ“·</button>
    <span class="arrow" id="camArrow">â–¼</span>
  </div>
  <button class="ctrl-btn" id="shareBtn">ðŸ–¥</button>
</div>

<div class="modal" id="micModal">
  <div class="modal-content">
    <div class="modal-close" id="micClose">âœ–</div>
  </div>
</div>
<div class="modal" id="camModal">
  <div class="modal-content">
    <div class="modal-close" id="camClose">âœ–</div>
  </div>
</div>

<script>
const stage=document.getElementById("stage");
const micBtn=document.getElementById("micBtn");
const camBtn=document.getElementById("camBtn");
const shareBtn=document.getElementById("shareBtn");
const micModal=document.getElementById("micModal");
const camModal=document.getElementById("camModal");
const micClose=document.getElementById("micClose");
const camClose=document.getElementById("camClose");
const micArrow=document.getElementById("micArrow");
const camArrow=document.getElementById("camArrow");

let localStream;
let micOn=true,camOn=true;

const peer=new Peer(undefined,{host:"peerjs.com",secure:true,port:443});
const peers={};

async function initMedia(){
  localStream=await navigator.mediaDevices.getUserMedia({video:true,audio:true});
  addVideo("You",localStream,true);
}
function addVideo(label,stream,muted=false){
  const box=document.createElement("div");
  box.className="video-box";
  const video=document.createElement("video");
  video.srcObject=stream;
  video.autoplay=true;
  video.muted=muted;
  const tag=document.createElement("div");
  tag.className="name-tag";
  tag.textContent=label;
  box.append(video,tag);
  stage.appendChild(box);
  makeDraggableResizable(box);
}
function makeDraggableResizable(el){
  let posX=0,posY=0,startX=0,startY=0;
  function dragStart(e){
    if(e.target.tagName==="VIDEO"||e.target.classList.contains("name-tag"))return;
    startX=e.touches?e.touches[0].clientX:e.clientX;
    startY=e.touches?e.touches[0].clientY:e.clientY;
    posX=el.offsetLeft;
    posY=el.offsetTop;
    document.onmousemove=dragMove;
    document.onmouseup=dragEnd;
    document.ontouchmove=dragMove;
    document.ontouchend=dragEnd;
  }
  function dragMove(e){
    let clientX=e.touches?e.touches[0].clientX:e.clientX;
    let clientY=e.touches?e.touches[0].clientY:e.clientY;
    el.style.left=posX+(clientX-startX)+"px";
    el.style.top=posY+(clientY-startY)+"px";
  }
  function dragEnd(){document.onmousemove=null;document.onmouseup=null;document.ontouchmove=null;document.ontouchend=null;}
  el.addEventListener("mousedown",dragStart);
  el.addEventListener("touchstart",dragStart);
}

/* ================= BUTTON ACTIONS ================= */
micBtn.onclick=()=>{micOn=!micOn;localStream.getAudioTracks()[0].enabled=micOn;micBtn.classList.toggle("off",!micOn);}
camBtn.onclick=()=>{camOn=!camOn;localStream.getVideoTracks()[0].enabled=camOn;camBtn.classList.toggle("off",!camOn);}
micArrow.onclick=e=>{micModal.classList.toggle("show");e.stopPropagation();}
camArrow.onclick=e=>{camModal.classList.toggle("show");e.stopPropagation();}
micClose.onclick=()=>micModal.classList.remove("show");
camClose.onclick=()=>camModal.classList.remove("show");
[micModal,camModal].forEach(m=>m.addEventListener("click",e=>{if(e.target===m)m.classList.remove("show");}));
shareBtn.onclick=async()=>{const s=await navigator.mediaDevices.getDisplayMedia({video:true});addVideo("Screen",s);};

initMedia();
</script>
</body>
</html>
